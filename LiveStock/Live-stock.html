<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dairy Farm Livestock Management</title>
    <style>
        :root {
            --primary: #5D8AA8;
            --primary-light: #8ab8d4;
            --secondary: #f9f9f9;
            --text: #333;
            --danger: #f44336;
            --warning: #ff9800;
            --success: #4caf50;
            --edit: #F5F5F5;
            --edit-text: #333;
            --close-light: #F5F5F5;
            --close-text: #333;
            --card-bg-1: #e6f3fa;
            --card-bg-2: #e8f5e9;
            --card-bg-3: #fff3e0;
            --card-bg-4: #f3e5f5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f8f0;
            color: var(--text);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            color: white;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            margin-bottom: 20px;
        }
        
        .dashboard .card:nth-child(1) {
            background-color: var(--card-bg-1);
        }
        
        .dashboard .card:nth-child(2) {
            background-color: var(--card-bg-2);
        }
        
        .dashboard .card:nth-child(3) {
            background-color: var(--card-bg-3);
        }
        
        .dashboard .card:nth-child(4) {
            background-color: var(--card-bg-4);
        }
        
        .card.production-log,
        .card.cattle-registry,
        .card.generate-reports,
        .card.recent-reports {
            background-color: white;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .card-title {
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .card-body {
            margin-bottom: 15px;
        }
        
        .stat {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .stat-label {
            color: #666;
        }
        
        .tabs {
            display: flex;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            flex-grow: 1;
            text-align: center;
            transition: background-color 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            background-color: var(--secondary);
            border-bottom: 3px solid var(--primary);
            font-weight: bold;
        }
        
        .tab:hover:not(.active) {
            background-color: #f1f1f1;
        }
        
        .tab-content {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        table th {
            background-color: var(--secondary);
            color: var(--text);
        }
        
        table tr:hover {
            background-color: #f9f9f9;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-light);
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #ff5c5c;
        }
        
        .btn-warning {
            background-color: #ff9800;
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #ffad33;
        }
        
        .btn-edit {
            background-color: var(--edit);
            color: var(--edit-text);
        }
        
        .btn-edit:hover {
            background-color: #e0e0e0;
        }
        
        .btn-close {
            background-color: var(--close-light);
            color: var(--close-text);
        }
        
        .btn-close:hover {
            background-color: #e0e0e0;
        }
        
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            min-width: 100px; /* Added for consistent width */
            text-align: center; /* Center text for uniform alignment */
        }
        
        .status-healthy {
            background-color: #e8f5e9;
            color: var(--success);
        }
        
        .status-attention {
            background-color: #fff3e0;
            color: var(--warning);
        }
        
        .status-sick {
            background-color: #ffebee;
            color: var(--danger);
        }
        
        .search-bar {
            display: flex;
            margin-bottom: 20px;
        }
        
        .search-bar input {
            flex-grow: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px 0 0 5px;
            outline: none;
        }
        
        .search-bar button {
            padding: 10px 15px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            background-color: white;
            z-index: 1;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #333;
        }
        
        .form-group {
            margin-bottom: 15px;
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .form-group .error-message {
            color: var(--danger);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }
        
        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
            border-color: var(--danger);
        }
        
        .form-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            position: sticky;
            bottom: 0;
            background-color: white;
            padding-top: 10px;
            z-index: 1;
        }
        
        .actions-cell {
            display: flex;
            gap: 10px;
            align-items: center;
            white-space: nowrap;
        }
        
        .report-preview {
            padding: 20px;
        }
        
        .report-preview h3 {
            margin-bottom: 15px;
        }
        
        .report-preview p {
            margin-bottom: 10px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--success);
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 1001;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .modal-content {
                width: 95%;
                margin: 5% auto;
            }
            
            .actions-cell {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 4V16H4V4H20ZM22 2H2V18H22V2ZM12 19C10.9 19 10 19.9 10 21H14C14 19.9 13.1 19 12 19Z" fill="#5D8AA8"/>
                    <path d="M6 7H18V9H6V7Z" fill="#5D8AA8"/>
                    <path d="M6 11H18V13H6V11Z" fill="#5D8AA8"/>
                </svg>
                <h1>Live Stock</h1>
            </div>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="milk">Milk Production</div>
            <div class="tab" data-tab="cattle">Cattle Management</div>
            <div class="tab" data-tab="reports">Reports</div>
        </div>
        
        <div id="milk" class="tab-content active">
            <div class="dashboard">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Today's Production</div>
                    </div>
                    <div class="card-body">
                        <div class="stat">
                            <div class="stat-value" id="morning-milk">563 L</div>
                            <div class="stat-label">Morning Collection</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="evening-milk">-- L</div>
                            <div class="stat-label">Evening Collection</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="total-milk">563 L</div>
                            <div class="stat-label">Total Today</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Production Trends</div>
                    </div>
                    <div class="card-body">
                        <div class="stat">
                            <div class="stat-value" id="daily-average">1,285 L</div>
                            <div class="stat-label">Daily Average</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="weekly-total">8,995 L</div>
                            <div class="stat-label">Weekly Total</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="monthly-total">38,550 L</div>
                            <div class="stat-label">Monthly Total</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Quality Metrics</div>
                    </div>
                    <div class="card-body">
                        <div class="stat">
                            <div class="stat-value" id="fat-content">3.8%</div>
                            <div class="stat-label">Fat Content</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="protein-content">3.2%</div>
                            <div class="stat-label">Protein Content</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value status-healthy" id="bacteria-count">Low</div>
                            <div class="stat-label">Bacteria Count</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Herd Performance</div>
                    </div>
                    <div class="card-body">
                        <div class="stat">
                            <div class="stat-value" id="top-producer">COW-1001</div>
                            <div class="stat-label">Top Producer</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="avg-yield">19.8 L</div>
                            <div class="stat-label">Avg. Yield per Cow</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="milking-cows">5</div>
                            <div class="stat-label">Milking Cows</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value status-attention" id="health-alerts">2</div>
                            <div class="stat-label">Health Alerts</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card production-log">
                <div class="card-header">
                    <div class="card-title">Production Log</div>
                    <button class="btn btn-primary" id="add-milk-record-btn">Add Record</button>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Collection</th>
                                <th>Volume</th>
                                <th>Quality</th>
                                <th>Notes</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="milk-table">
                            <tr>
                                <td>2025-05-19</td>
                                <td>Morning</td>
                                <td>563 L</td>
                                <td><span class="status status-healthy">Grade A</span></td>
                                <td>Normal production</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-milk-record" data-id="2025-05-19-M">View</button>
                                    <button class="btn btn-edit edit-milk-record" data-id="2025-05-19-M">Edit</button>
                                    <button class="btn btn-danger delete-milk-record" data-id="2025-05-19-M">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-05-18</td>
                                <td>Evening</td>
                                <td>582 L</td>
                                <td><span class="status status-healthy">Grade A</span></td>
                                <td>Normal production</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-milk-record" data-id="2025-05-18-E">View</button>
                                    <button class="btn btn-edit edit-milk-record" data-id="2025-05-18-E">Edit</button>
                                    <button class="btn btn-danger delete-milk-record" data-id="2025-05-18-E">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-05-18</td>
                                <td>Morning</td>
                                <td>575 L</td>
                                <td><span class="status status-healthy">Grade A</span></td>
                                <td>Normal production</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-milk-record" data-id="2025-05-18-M">View</button>
                                    <button class="btn btn-edit edit-milk-record" data-id="2025-05-18-M">Edit</button>
                                    <button class="btn btn-danger delete-milk-record" data-id="2025-05-18-M">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-05-17</td>
                                <td>Evening</td>
                                <td>590 L</td>
                                <td><span class="status status-healthy">Grade A</span></td>
                                <td>Normal production</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-milk-record" data-id="2025-05-17-E">View</button>
                                    <button class="btn btn-edit edit-milk-record" data-id="2025-05-17-E">Edit</button>
                                    <button class="btn btn-danger delete-milk-record" data-id="2025-05-17-E">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="cattle" class="tab-content">
            <div class="search-bar">
                <input type="text" id="cattle-search" placeholder="Search by ID, breed, age...">
                <button id="search-cattle-btn">Search</button>
            </div>
            
            <div class="card cattle-registry">
                <div class="card-header">
                    <div class="card-title">Cattle Registry</div>
                    <button class="btn btn-primary" id="add-cattle-btn">Add New Cattle</button>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Tag ID</th>
                                <th>Breed</th>
                                <th>Age</th>
                                <th>Status</th>
                                <th>Last Milk Yield</th>
                                <th>Health</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cattle-table">
                            <tr>
                                <td>COW-1001</td>
                                <td>Holstein</td>
                                <td>4 years</td>
                                <td>Milking</td>
                                <td>22.5 L</td>
                                <td><span class="status status-healthy">Healthy</span></td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-cattle" data-id="1001">View</button>
                                    <button class="btn btn-edit edit-cattle" data-id="1001">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>COW-1002</td>
                                <td>Jersey</td>
                                <td>3 years</td>
                                <td>Milking</td>
                                <td>18.2 L</td>
                                <td><span class="status status-healthy">Healthy</span></td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-cattle" data-id="1002">View</button>
                                    <button class="btn btn-edit edit-cattle" data-id="1002">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>COW-1003</td>
                                <td>Brown Swiss</td>
                                <td>5 years</td>
                                <td>Dry</td>
                                <td>N/A</td>
                                <td><span class="status status-attention">Needs Check</span></td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-cattle" data-id="1003">View</button>
                                    <button class="btn btn-edit edit-cattle" data-id="1003">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>COW-1004</td>
                                <td>Holstein</td>
                                <td>2 years</td>
                                <td>Milking</td>
                                <td>19.8 L</td>
                                <td><span class="status status-sick">Treatment</span></td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-cattle" data-id="1004">View</button>
                                    <button class="btn btn-edit edit-cattle" data-id="1004">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>COW-1005</td>
                                <td>Holstein</td>
                                <td>3 years</td>
                                <td>Milking</td>
                                <td>21.3 L</td>
                                <td><span class="status status-healthy">Healthy</span></td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-cattle" data-id="1005">View</button>
                                    <button class="btn btn-edit edit-cattle" data-id="1005">Edit</button>
                                </td>
                            </tr>
                            <tr>
                                <td>COW-1006</td>
                                <td>Jersey</td>
                                <td>4 years</td>
                                <td>Milking</td>
                                <td>17.9 L</td>
                                <td><span class="status status-healthy">Healthy</span></td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-cattle" data-id="1006">View</button>
                                    <button class="btn btn-edit edit-cattle" data-id="1006">Edit</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div id="reports" class="tab-content">
            <div class="card generate-reports">
                <div class="card-header">
                    <div class="card-title">Generate Reports</div>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="report-type">Report Type</label>
                        <select id="report-type">
                            <option value="milk-production">Milk Production</option>
                            <option value="health-status">Health Status</option>
                            <option value="feed-consumption">Feed Consumption</option>
                            <option value="financial">Financial Overview</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="report-period">Time Period</label>
                        <select id="report-period">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="form-group" id="custom-date-range" style="display: none;">
                        <label for="start-date">Start Date</label>
                        <input type="date" id="start-date">
                        <label for="end-date">End Date</label>
                        <input type="date" id="end-date">
                    </div>
                    <div class="form-group">
                        <label for="report-category">Category</label>
                        <select id="report-category">
                            <option value="summary">Summary</option>
                            <option value="detailed">Detailed</option>
                            <option value="statistical">Statistical</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="generate-report-btn">Generate Report</button>
                </div>
            </div>
            
            <div class="card recent-reports">
                <div class="card-header">
                    <div class="card-title">Recent Reports</div>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Report Type</th>
                                <th>Period</th>
                                <th>Category</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="reports-table">
                            <tr>
                                <td>2025-05-15</td>
                                <td>Milk Production</td>
                                <td>Weekly</td>
                                <td>Summary</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-report" data-id="MP-W-S-20250515">View</button>
                                    <button class="btn btn-edit download-report" data-id="MP-W-S-20250515">Download</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-05-10</td>
                                <td>Health Status</td>
                                <td>Monthly</td>
                                <td>Detailed</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-report" data-id="HS-M-D-20250510">View</button>
                                    <button class="btn btn-edit download-report" data-id="HS-M-D-20250510">Download</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-05-01</td>
                                <td>Financial Overview</td>
                                <td>Monthly</td>
                                <td>Statistical</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-report" data-id="FO-M-S-20250501">View</button>
                                    <button class="btn btn-edit download-report" data-id="FO-M-S-20250501">Download</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-04-25</td>
                                <td>Feed Consumption</td>
                                <td>Weekly</td>
                                <td>Summary</td>
                                <td class="actions-cell">
                                    <button class="btn btn-primary view-report" data-id="FC-W-S-20250425">View</button>
                                    <button class="btn btn-edit download-report" data-id="FC-W-S-20250425">Download</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Cattle Details -->
    <div id="cattleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="cattle-modal-title">Cattle Details</div>
                <span class="close">×</span>
            </div>
            <div id="cattle-modal-body">
                <div class="form-group">
                    <label for="cattle-id">Tag ID</label>
                    <input type="text" id="cattle-id" placeholder="e.g. COW-1001">
                    <div class="error-message" id="cattle-id-error"></div>
                </div>
                <div class="form-group">
                    <label for="cattle-breed">Breed</label>
                    <select id="cattle-breed">
                        <option value="Holstein">Holstein</option>
                        <option value="Jersey">Jersey</option>
                        <option value="Brown Swiss">Brown Swiss</option>
                        <option value="Ayrshire">Ayrshire</option>
                        <option value="Guernsey">Guernsey</option>
                    </select>
                    <div class="error-message" id="cattle-breed-error"></div>
                </div>
                <div class="form-group">
                    <label for="cattle-dob">Date of Birth</label>
                    <input type="date" id="cattle-dob">
                    <div class="error-message" id="cattle-dob-error"></div>
                </div>
                <div class="form-group">
                    <label for="cattle-status">Current Status</label>
                    <select id="cattle-status">
                        <option value="Milking">Milking</option>
                        <option value="Dry">Dry</option>
                        <option value="Calf">Calf</option>
                        <option value="Pregnant">Pregnant</option>
                    </select>
                    <div class="error-message" id="cattle-status-error"></div>
                </div>
                <div class="form-group">
                    <label for="cattle-milk-yield">Last Milk Yield (Liters)</label>
                    <input type="number" id="cattle-milk-yield" step="0.1" min="0" placeholder="e.g. 18.5">
                    <div class="error-message" id="cattle-milk-yield-error"></div>
                </div>
                <div class="form-group">
                    <label for="cattle-health">Health Status</label>
                    <select id="cattle-health">
                        <option value="Healthy">Healthy</option>
                        <option value="Needs Check">Needs Check</option>
                        <option value="Treatment">Under Treatment</option>
                    </select>
                    <div class="error-message" id="cattle-health-error"></div>
                </div>
                <div class="form-group">
                    <label for="cattle-notes">Notes</label>
                    <textarea id="cattle-notes" rows="4" placeholder="Additional information..."></textarea>
                    <div class="error-message" id="cattle-notes-error"></div>
                </div>
            </div>
            <div class="form-buttons">
                <button class="btn btn-danger" id="delete-cattle-btn">Delete</button>
                <button class="btn btn-edit" id="update-cattle-btn">Update</button>
                <button class="btn btn-primary" id="save-cattle-btn">Save</button>
                <button class="btn btn-close" id="close-cattle-modal">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Milk Record Details -->
    <div id="milkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="milk-modal-title">Milk Production Record</div>
                <span class="close">×</span>
            </div>
            <div id="milk-modal-body">
                <div class="form-group">
                    <label for="milk-date">Collection Date</label>
                    <input type="date" id="milk-date">
                    <div class="error-message" id="milk-date-error"></div>
                </div>
                <div class="form-group">
                    <label for="milk-collection">Collection Time</label>
                    <select id="milk-collection">
                        <option value="Morning">Morning</option>
                        <option value="Evening">Evening</option>
                    </select>
                    <div class="error-message" id="milk-collection-error"></div>
                </div>
                <div class="form-group">
                    <label for="milk-volume">Total Volume (Liters)</label>
                    <input type="number" id="milk-volume" step="0.1" min="0" placeholder="e.g. 550">
                    <div class="error-message" id="milk-volume-error"></div>
                </div>
                <div class="form-group">
                    <label for="milk-quality">Quality Grade</label>
                    <select id="milk-quality">
                        <option value="Grade A">Grade A</option>
                        <option value="Grade B">Grade B</option>
                        <option value="Grade C">Grade C</option>
                    </select>
                    <div class="error-message" id="milk-quality-error"></div>
                </div>
                <div class="form-group">
                    <label for="milk-fat">Fat Content (%)</label>
                    <input type="number" id="milk-fat" step="0.1" min="0" max="10" placeholder="e.g. 3.8">
                    <div class="error-message" id="milk-fat-error"></div>
                </div>
                <div class="form-group">
                    <label for="milk-protein">Protein Content (%)</label>
                    <input type="number" id="milk-protein" step="0.1" min="0" max="10" placeholder="e.g. 3.2">
                    <div class="error-message" id="milk-protein-error"></div>
                </div>
                <div class="form-group">
                    <label for="milk-notes">Notes</label>
                    <textarea id="milk-notes" rows="4" placeholder="Additional information..."></textarea>
                    <div class="error-message" id="milk-notes-error"></div>
                </div>
            </div>
            <div class="form-buttons">
                <button class="btn btn-danger" id="delete-milk-btn">Delete</button>
                <button class="btn btn-edit" id="update-milk-btn">Update</button>
                <button class="btn btn-primary" id="save-milk-btn">Save</button>
                <button class="btn btn-close" id="close-milk-modal">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Report Preview -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="report-modal-title">Report Preview</div>
                <span class="close">×</span>
            </div>
            <div id="report-modal-body" class="report-preview">
            </div>
            <div class="form-buttons">
                <button class="btn btn-close" id="close-report-modal">Close</button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div class="notification" id="notification">
        Operation completed successfully!
    </div>

    <script>
        // Tab Navigation
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(this.dataset.tab).classList.add('active');
            });
        });
        
        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            // Clear error messages and styles when closing modal
            const modal = document.getElementById(modalId);
            modal.querySelectorAll('.error-message').forEach(error => {
                error.style.display = 'none';
                error.textContent = '';
            });
            modal.querySelectorAll('input, select, textarea').forEach(field => {
                field.classList.remove('error');
            });
        }
        
        document.querySelectorAll('.close, #close-cattle-modal, #close-milk-modal, #close-report-modal').forEach(element => {
            element.addEventListener('click', function() {
                const modalId = this.closest('.modal').id;
                closeModal(modalId);
            });
        });
        
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal(event.target.id);
            }
        });
        
        // Validation Functions
        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(`${fieldId}-error`);
            field.classList.add('error');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
        
        function clearError(fieldId) {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(`${fieldId}-error`);
            field.classList.remove('error');
            errorElement.textContent = '';
            errorElement.style.display = 'none';
        }
        
        function validateCattleForm(isUpdate = false) {
            let isValid = true;
            
            // Tag ID validation
            const cattleId = document.getElementById('cattle-id').value.trim();
            if (!isUpdate && !cattleId) {
                showError('cattle-id', 'Tag ID is required');
                isValid = false;
            } else if (!isUpdate && !cattleId.match(/^COW-\d+$/)) {
                showError('cattle-id', 'Tag ID must be in format COW- followed by numbers');
                isValid = false;
            } else {
                clearError('cattle-id');
            }
            
            // Breed validation
            const breed = document.getElementById('cattle-breed').value;
            if (!breed) {
                showError('cattle-breed', 'Breed is required');
                isValid = false;
            } else {
                clearError('cattle-breed');
            }
            
            // Date of Birth validation
            const dob = document.getElementById('cattle-dob').value;
            const today = new Date();
            const dobDate = new Date(dob);
            if (!dob) {
                showError('cattle-dob', 'Date of Birth is required');
                isValid = false;
            } else if (dobDate > today) {
                showError('cattle-dob', 'Date of Birth cannot be in the future');
                isValid = false;
            } else {
                clearError('cattle-dob');
            }
            
            // Status validation
            const status = document.getElementById('cattle-status').value;
            if (!status) {
                showError('cattle-status', 'Status is required');
                isValid = false;
            } else {
                clearError('cattle-status');
            }
            
            // Milk Yield validation
            const milkYield = document.getElementById('cattle-milk-yield').value;
            if (milkYield === '') {
                showError('cattle-milk-yield', 'Milk Yield is required');
                isValid = false;
            } else if (milkYield < 0) {
                showError('cattle-milk-yield', 'Milk Yield cannot be negative');
                isValid = false;
            } else {
                clearError('cattle-milk-yield');
            }
            
            // Health Status validation
            const health = document.getElementById('cattle-health').value;
            if (!health) {
                showError('cattle-health', 'Health Status is required');
                isValid = false;
            } else {
                clearError('cattle-health');
            }
            
            // Notes validation (optional, but limit length)
            const notes = document.getElementById('cattle-notes').value.trim();
            if (notes.length > 500) {
                showError('cattle-notes', 'Notes cannot exceed 500 characters');
                isValid = false;
            } else {
                clearError('cattle-notes');
            }
            
            return isValid;
        }
        
        function validateMilkForm(isUpdate = false) {
            let isValid = true;
            
            // Collection Date validation
            const milkDate = document.getElementById('milk-date').value;
            const today = new Date();
            const collectionDate = new Date(milkDate);
            if (!milkDate) {
                showError('milk-date', 'Collection Date is required');
                isValid = false;
            } else if (collectionDate > today) {
                showError('milk-date', 'Collection Date cannot be in the future');
                isValid = false;
            } else {
                clearError('milk-date');
            }
            
            // Collection Time validation
            const collectionTime = document.getElementById('milk-collection').value;
            if (!collectionTime) {
                showError('milk-collection', 'Collection Time is required');
                isValid = false;
            } else {
                clearError('milk-collection');
            }
            
            // Volume validation
            const volume = document.getElementById('milk-volume').value;
            if (volume === '') {
                showError('milk-volume', 'Volume is required');
                isValid = false;
            } else if (volume < 0) {
                showError('milk-volume', 'Volume cannot be negative');
                isValid = false;
            } else if (volume > 10000) {
                showError('milk-volume', 'Volume cannot exceed 10,000 liters');
                isValid = false;
            } else {
                clearError('milk-volume');
            }
            
            // Quality Grade validation
            const quality = document.getElementById('milk-quality').value;
            if (!quality) {
                showError('milk-quality', 'Quality Grade is required');
                isValid = false;
            } else {
                clearError('milk-quality');
            }
            
            // Fat Content validation
            const fat = document.getElementById('milk-fat').value;
            if (fat === '') {
                showError('milk-fat', 'Fat Content is required');
                isValid = false;
            } else if (fat < 0 || fat > 10) {
                showError('milk-fat', 'Fat Content must be between 0 and 10%');
                isValid = false;
            } else {
                clearError('milk-fat');
            }
            
            // Protein Content validation
            const protein = document.getElementById('milk-protein').value;
            if (protein === '') {
                showError('milk-protein', 'Protein Content is required');
                isValid = false;
            } else if (protein < 0 || protein > 10) {
                showError('milk-protein', 'Protein Content must be between 0 and 10%');
                isValid = false;
            } else {
                clearError('milk-protein');
            }
            
            // Notes validation (optional, but limit length)
            const notes = document.getElementById('milk-notes').value.trim();
            if (notes.length > 500) {
                showError('milk-notes', 'Notes cannot exceed 500 characters');
                isValid = false;
            } else {
                clearError('milk-notes');
            }
            
            return isValid;
        }
        
        // Real-time validation for Cattle Form
        document.querySelectorAll('#cattle-modal-body input, #cattle-modal-body select, #cattle-modal-body textarea').forEach(field => {
            field.addEventListener('input', function() {
                validateCattleForm();
            });
        });
        
        // Real-time validation for Milk Form
        document.querySelectorAll('#milk-modal-body input, #milk-modal-body select, #milk-modal-body textarea').forEach(field => {
            field.addEventListener('input', function() {
                validateMilkForm();
            });
        });
        
        // Cattle Management
        document.getElementById('add-cattle-btn').addEventListener('click', function() {
            document.getElementById('cattle-modal-title').textContent = 'Add New Cattle';
            document.getElementById('cattle-id').value = '';
            document.getElementById('cattle-breed').value = 'Holstein';
            document.getElementById('cattle-dob').value = '';
            document.getElementById('cattle-status').value = 'Milking';
            document.getElementById('cattle-milk-yield').value = '';
            document.getElementById('cattle-health').value = 'Healthy';
            document.getElementById('cattle-notes').value = '';
            
            document.getElementById('delete-cattle-btn').style.display = 'none';
            document.getElementById('update-cattle-btn').style.display = 'none';
            document.getElementById('save-cattle-btn').style.display = 'inline-block';
            
            document.querySelectorAll('#cattle-modal-body input, #cattle-modal-body select, #cattle-modal-body textarea').forEach(field => {
                field.disabled = false;
                clearError(field.id);
            });
            
            openModal('cattleModal');
        });
        
        document.querySelectorAll('.view-cattle').forEach(button => {
            button.addEventListener('click', function() {
                const cattleId = this.dataset.id;
                document.getElementById('cattle-modal-title').textContent = `Cattle Details - COW-${cattleId}`;
                
                document.getElementById('cattle-id').value = `COW-${cattleId}`;
                document.getElementById('cattle-id').disabled = true;
                
                switch(cattleId) {
                    case '1001':
                        document.getElementById('cattle-breed').value = 'Holstein';
                        document.getElementById('cattle-dob').value = '2021-05-10';
                        document.getElementById('cattle-status').value = 'Milking';
                        document.getElementById('cattle-milk-yield').value = '22.5';
                        document.getElementById('cattle-health').value = 'Healthy';
                        document.getElementById('cattle-notes').value = 'Good producer, no health issues.';
                        break;
                    case '1003':
                        document.getElementById('cattle-breed').value = 'Brown Swiss';
                        document.getElementById('cattle-dob').value = '2020-01-15';
                        document.getElementById('cattle-status').value = 'Dry';
                        document.getElementById('cattle-milk-yield').value = '0';
                        document.getElementById('cattle-health').value = 'Needs Check';
                        document.getElementById('cattle-notes').value = 'Currently in dry period. Due date: 2025-08-10. Schedule vet check next week.';
                        break;
                    case '1004':
                        document.getElementById('cattle-breed').value = 'Holstein';
                        document.getElementById('cattle-dob').value = '2023-03-20';
                        document.getElementById('cattle-status').value = 'Milking';
                        document.getElementById('cattle-milk-yield').value = '19.8';
                        document.getElementById('cattle-health').value = 'Treatment';
                        document.getElementById('cattle-notes').value = 'Mastitis treatment in progress. Milk being discarded during treatment period. Expected to complete treatment by 2025-05-25.';
                        break;
                    default:
                        document.getElementById('cattle-breed').value = 'Jersey';
                        document.getElementById('cattle-dob').value = '2022-06-10';
                        document.getElementById('cattle-status').value = 'Milking';
                        document.getElementById('cattle-milk-yield').value = '18.0';
                        document.getElementById('cattle-health').value = 'Healthy';
                        document.getElementById('cattle-notes').value = 'Normal production.';
                        break;
                }
                
                document.querySelectorAll('#cattle-modal-body input, #cattle-modal-body select, #cattle-modal-body textarea').forEach(field => {
                    field.disabled = true;
                    clearError(field.id);
                });
                
                document.getElementById('delete-cattle-btn').style.display = 'none';
                document.getElementById('update-cattle-btn').style.display = 'none';
                document.getElementById('save-cattle-btn').style.display = 'none';
                document.getElementById('close-cattle-modal').style.display = 'inline-block';
                
                openModal('cattleModal');
            });
        });
        
        document.querySelectorAll('.edit-cattle').forEach(button => {
            button.addEventListener('click', function() {
                const cattleId = this.dataset.id;
                document.getElementById('cattle-modal-title').textContent = `Edit Cattle - COW-${cattleId}`;
                
                document.getElementById('cattle-id').value = `COW-${cattleId}`;
                document.getElementById('cattle-id').disabled = true;
                
                switch(cattleId) {
                    case '1001':
                        document.getElementById('cattle-breed').value = 'Holstein';
                        document.getElementById('cattle-dob').value = '2021-05-10';
                        document.getElementById('cattle-status').value = 'Milking';
                        document.getElementById('cattle-milk-yield').value = '22.5';
                        document.getElementById('cattle-health').value = 'Healthy';
                        document.getElementById('cattle-notes').value = 'Good producer, no health issues.';
                        break;
                    case '1003':
                        document.getElementById('cattle-breed').value = 'Brown Swiss';
                        document.getElementById('cattle-dob').value = '2020-01-15';
                        document.getElementById('cattle-status').value = 'Dry';
                        document.getElementById('cattle-milk-yield').value = '0';
                        document.getElementById('cattle-health').value = 'Needs Check';
                        document.getElementById('cattle-notes').value = 'Currently in dry period. Due date: 2025-08-10. Schedule vet check next week.';
                        break;
                    case '1004':
                        document.getElementById('cattle-breed').value = 'Holstein';
                        document.getElementById('cattle-dob').value = '2023-03-20';
                        document.getElementById('cattle-status').value = 'Milking';
                        document.getElementById('cattle-milk-yield').value = '19.8';
                        document.getElementById('cattle-health').value = 'Treatment';
                        document.getElementById('cattle-notes').value = 'Mastitis treatment in progress. Milk being discarded during treatment period. Expected to complete treatment by 2025-05-25.';
                        break;
                    default:
                        document.getElementById('cattle-breed').value = 'Jersey';
                        document.getElementById('cattle-dob').value = '2022-06-10';
                        document.getElementById('cattle-status').value = 'Milking';
                        document.getElementById('cattle-milk-yield').value = '18.0';
                        document.getElementById('cattle-health').value = 'Healthy';
                        document.getElementById('cattle-notes').value = 'Normal production.';
                        break;
                }
                
                document.querySelectorAll('#cattle-modal-body input, #cattle-modal-body select, #cattle-modal-body textarea').forEach(field => {
                    if (field.id !== 'cattle-id') {
                        field.disabled = false;
                    }
                    clearError(field.id);
                });
                
                document.getElementById('delete-cattle-btn').style.display = 'none';
                document.getElementById('update-cattle-btn').style.display = 'inline-block';
                document.getElementById('save-cattle-btn').style.display = 'none';
                document.getElementById('close-cattle-modal').style.display = 'inline-block';
                
                openModal('cattleModal');
            });
        });
        
        // Milk Production Management
        document.getElementById('add-milk-record-btn').addEventListener('click', function() {
            document.getElementById('milk-modal-title').textContent = 'Add Milk Production Record';
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('milk-date').value = today;
            
            document.getElementById('milk-collection').value = 'Evening';
            document.getElementById('milk-volume').value = '';
            document.getElementById('milk-quality').value = 'Grade A';
            document.getElementById('milk-fat').value = '3.8';
            document.getElementById('milk-protein').value = '3.2';
            document.getElementById('milk-notes').value = '';
            
            document.querySelectorAll('#milk-modal-body input, #milk-modal-body select, #milk-modal-body textarea').forEach(field => {
                field.disabled = false;
                clearError(field.id);
            });
            
            document.getElementById('delete-milk-btn').style.display = 'none';
            document.getElementById('update-milk-btn').style.display = 'none';
            document.getElementById('save-milk-btn').style.display = 'inline-block';
            document.getElementById('close-milk-modal').style.display = 'inline-block';
            
            openModal('milkModal');
        });
        
        document.querySelectorAll('.view-milk-record').forEach(button => {
            button.addEventListener('click', function() {
                const recordId = this.dataset.id;
                document.getElementById('milk-modal-title').textContent = `Milk Record - ${recordId}`;
                
                const [date, collection] = recordId.split('-');
                const formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
                const collectionTime = collection === 'M' ? 'Morning' : 'Evening';
                
                document.getElementById('milk-date').value = formattedDate;
                document.getElementById('milk-collection').value = collectionTime;
                
                if (collectionTime === 'Morning') {
                    document.getElementById('milk-volume').value = '575';
                    document.getElementById('milk-fat').value = '3.8';
                    document.getElementById('milk-protein').value = '3.2';
                } else {
                    document.getElementById('milk-volume').value = '590';
                    document.getElementById('milk-fat').value = '3.7';
                    document.getElementById('milk-protein').value = '3.3';
                }
                
                document.getElementById('milk-quality').value = 'Grade A';
                document.getElementById('milk-notes').value = 'Normal production';
                
                document.querySelectorAll('#milk-modal-body input, #milk-modal-body select, #milk-modal-body textarea').forEach(field => {
                    field.disabled = true;
                    clearError(field.id);
                });
                
                document.getElementById('delete-milk-btn').style.display = 'none';
                document.getElementById('update-milk-btn').style.display = 'none';
                document.getElementById('save-milk-btn').style.display = 'none';
                document.getElementById('close-milk-modal').style.display = 'inline-block';
                
                openModal('milkModal');
            });
        });
        
        document.querySelectorAll('.edit-milk-record').forEach(button => {
            button.addEventListener('click', function() {
                const recordId = this.dataset.id;
                document.getElementById('milk-modal-title').textContent = `Edit Milk Record - ${recordId}`;
                
                const [date, collection] = recordId.split('-');
                const formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
                const collectionTime = collection === 'M' ? 'Morning' : 'Evening';
                
                document.getElementById('milk-date').value = formattedDate;
                document.getElementById('milk-collection').value = collectionTime;
                
                if (collectionTime === 'Morning') {
                    document.getElementById('milk-volume').value = '575';
                    document.getElementById('milk-fat').value = '3.8';
                    document.getElementById('milk-protein').value = '3.2';
                } else {
                    document.getElementById('milk-volume').value = '590';
                    document.getElementById('milk-fat').value = '3.7';
                    document.getElementById('milk-protein').value = '3.3';
                }
                
                document.getElementById('milk-quality').value = 'Grade A';
                document.getElementById('milk-notes').value = 'Normal production';
                
                document.querySelectorAll('#milk-modal-body input, #milk-modal-body select, #milk-modal-body textarea').forEach(field => {
                    field.disabled = false;
                    clearError(field.id);
                });
                
                document.getElementById('delete-milk-btn').style.display = 'none';
                document.getElementById('update-milk-btn').style.display = 'inline-block';
                document.getElementById('save-milk-btn').style.display = 'none';
                document.getElementById('close-milk-modal').style.display = 'inline-block';
                
                openModal('milkModal');
            });
        });
        
        document.querySelectorAll('.delete-milk-record').forEach(button => {
            button.addEventListener('click', function() {
                const recordId = this.dataset.id;
                if (confirm(`Are you sure you want to delete milk record ${recordId}?`)) {
                    const row = this.closest('tr');
                    row.remove();
                    showNotification('Milk production record deleted successfully!');
                }
            });
        });
        
        // Report Management
        document.getElementById('report-period').addEventListener('click', function() {
            if (this.value === 'custom') {
                document.getElementById('custom-date-range').style.display = 'block';
            } else {
                document.getElementById('custom-date-range').style.display = 'none';
            }
        });
        
        document.getElementById('generate-report-btn').addEventListener('click', function() {
            const reportType = document.getElementById('report-type').value;
            const reportPeriod = document.getElementById('report-period').value;
            const reportCategory = document.getElementById('report-category').value;
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            
            const reportId = `${reportType.substring(0, 2).toUpperCase()}-${reportPeriod.charAt(0).toUpperCase()}-${reportCategory.charAt(0).toUpperCase()}-${today.replace(/-/g, '')}`;
            
            const reportsTable = document.getElementById('reports-table');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>${today}</td>
                <td>${reportType.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase())}</td>
                <td>${reportPeriod.charAt(0).toUpperCase() + reportPeriod.slice(1)}</td>
                <td>${reportCategory.charAt(0).toUpperCase() + reportCategory.slice(1)}</td>
                <td class="actions-cell">
                    <button class="btn btn-primary view-report" data-id="${reportId}">View</button>
                    <button class="btn btn-edit download-report" data-id="${reportId}">Download</button>
                </td>
            `;
            reportsTable.insertBefore(newRow, reportsTable.firstChild);
            
            showNotification('Report generated successfully!');
            
            newRow.querySelector('.view-report').addEventListener('click', viewReportHandler);
            newRow.querySelector('.download-report').addEventListener('click', downloadReportHandler);
        });
        
        function viewReportHandler() {
            const reportId = this.dataset.id;
            document.getElementById('report-modal-title').textContent = `Report Preview - ${reportId}`;
            
            const [type, period, category, date] = reportId.split('-');
            const formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
            let reportType = '';
            switch(type) {
                case 'MP': reportType = 'Milk Production'; break;
                case 'HS': reportType = 'Health Status'; break;
                case 'FC': reportType = 'Feed Consumption'; break;
                case 'FO': reportType = 'Financial Overview'; break;
            }
            
            document.getElementById('report-modal-body').innerHTML = `
                <h3>${reportType} Report</h3>
                <p><strong>Date:</strong> ${formattedDate}</p>
                <p><strong>Period:</strong> ${period === 'W' ? 'Weekly' : period === 'M' ? 'Monthly' : period === 'D' ? 'Daily' : period === 'Q' ? 'Quarterly' : 'Yearly'}</p>
                <p><strong>Category:</strong> ${category === 'S' ? 'Summary' : category === 'D' ? 'Detailed' : 'Statistical'}</p>
                <p><strong>Summary:</strong> This is a ${category === 'S' ? 'summary' : category === 'D' ? 'detailed' : 'statistical'} ${reportType} report for the specified period.</p>
                <p><strong>Details:</strong> Detailed data would be displayed here in a real application.</p>
            `;
            
            openModal('reportModal');
        }
        
        function downloadReportHandler() {
            const reportId = this.dataset.id;
            showNotification(`Downloading report ${reportId}...`);
        }
        
        document.querySelectorAll('.view-report').forEach(button => {
            button.addEventListener('click', viewReportHandler);
        });
        
        document.querySelectorAll('.download-report').forEach(button => {
            button.addEventListener('click', downloadReportHandler);
        });
        
        // Save, Update, Delete Functions
        document.getElementById('save-cattle-btn').addEventListener('click', function() {
            if (validateCattleForm()) {
                showNotification('New cattle added successfully!');
                closeModal('cattleModal');
            } else {
                showNotification('Please fix the errors in the form.');
            }
        });
        
        document.getElementById('update-cattle-btn').addEventListener('click', function() {
            if (validateCattleForm(true)) {
                showNotification('Cattle details updated successfully!');
                closeModal('cattleModal');
            } else {
                showNotification('Please fix precisione errors in the form.');
            }
        });
        
        document.getElementById('delete-cattle-btn').addEventListener('click', function() {
            if (confirm('Are you sure you want to delete this cattle record?')) {
                showNotification('Cattle record deleted successfully!');
                closeModal('cattleModal');
            }
        });
        
        document.getElementById('save-milk-btn').addEventListener('click', function() {
            if (validateMilkForm()) {
                showNotification('New milk production record added successfully!');
                
                const today = new Date().toISOString().split('T')[0];
                if (document.getElementById('milk-date').value === today) {
                    if (document.getElementById('milk-collection').value === 'Evening') {
                        document.getElementById('evening-milk').textContent = document.getElementById('milk-volume').value + ' L';
                        
                        const morningMilk = parseFloat(document.getElementById('morning-milk').textContent) || 0;
                        const eveningMilk = parseFloat(document.getElementById('milk-volume').value) || 0;
                        document.getElementById('total-milk').textContent = (morningMilk + eveningMilk) + ' L';
                    }
                }
                
                const milkTable = document.getElementById('milk-table');
                const newRow = document.createElement('tr');
                const date = document.getElementById('milk-date').value;
                const collection = document.getElementById('milk-collection').value;
                const volume = document.getElementById('milk-volume').value;
                const quality = document.getElementById('milk-quality').value;
                const notes = document.getElementById('milk-notes').value;
                const recordId = `${date.replace(/-/g, '')}-${collection.charAt(0)}`;
                newRow.innerHTML = `
                    <td>${date}</td>
                    <td>${collection}</td>
                    <td>${volume} L</td>
                    <td><span class="status status-healthy">${quality}</span></td>
                    <td>${notes || 'Normal production'}</td>
                    <td class="actions-cell">
                        <button class="btn btn-primary view-milk-record" data-id="${recordId}">View</button>
                        <button class="btn btn-edit edit-milk-record" data-id="${recordId}">Edit</button>
                        <button class="btn btn-danger delete-milk-record" data-id="${recordId}">Delete</button>
                    </td>
                `;
                milkTable.insertBefore(newRow, milkTable.firstChild);
                
                // Reattach event listeners for new row buttons
                newRow.querySelector('.view-milk-record').addEventListener('click', function() {
                    const recordId = this.dataset.id;
                    document.getElementById('milk-modal-title').textContent = `Milk Record - ${recordId}`;
                    
                    const [date, collection] = recordId.split('-');
                    const formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
                    const collectionTime = collection === 'M' ? 'Morning' : 'Evening';
                    
                    document.getElementById('milk-date').value = formattedDate;
                    document.getElementById('milk-collection').value = collectionTime;
                    document.getElementById('milk-volume').value = volume;
                    document.getElementById('milk-quality').value = quality;
                    document.getElementById('milk-fat').value = document.getElementById('milk-fat').value;
                    document.getElementById('milk-protein').value = document.getElementById('milk-protein').value;
                    document.getElementById('milk-notes').value = notes;
                    
                    document.querySelectorAll('#milk-modal-body input, #milk-modal-body select, #milk-modal-body textarea').forEach(field => {
                        field.disabled = true;
                        clearError(field.id);
                    });
                    
                    document.getElementById('delete-milk-btn').style.display = 'none';
                    document.getElementById('update-milk-btn').style.display = 'none';
                    document.getElementById('save-milk-btn').style.display = 'none';
                    document.getElementById('close-milk-modal').style.display = 'inline-block';
                    
                    openModal('milkModal');
                });
                
                newRow.querySelector('.edit-milk-record').addEventListener('click', function() {
                    const recordId = this.dataset.id;
                    document.getElementById('milk-modal-title').textContent = `Edit Milk Record - ${recordId}`;
                    
                    const [date, collection] = recordId.split('-');
                    const formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
                    const collectionTime = collection === 'M' ? 'Morning' : 'Evening';
                    
                    document.getElementById('milk-date').value = formattedDate;
                    document.getElementById('milk-collection').value = collectionTime;
                    document.getElementById('milk-volume').value = volume;
                    document.getElementById('milk-quality').value = quality;
                    document.getElementById('milk-fat').value = document.getElementById('milk-fat').value;
                    document.getElementById('milk-protein').value = document.getElementById('milk-protein').value;
                    document.getElementById('milk-notes').value = notes;
                    
                    document.querySelectorAll('#milk-modal-body input, #milk-modal-body select, #milk-modal-body textarea').forEach(field => {
                        field.disabled = false;
                        clearError(field.id);
                    });
                    
                    document.getElementById('delete-milk-btn').style.display = 'none';
                    document.getElementById('update-milk-btn').style.display = 'inline-block';
                    document.getElementById('save-milk-btn').style.display = 'none';
                    document.getElementById('close-milk-modal').style.display = 'inline-block';
                    
                    openModal('milkModal');
                });
                
                newRow.querySelector('.delete-milk-record').addEventListener('click', function() {
                    const recordId = this.dataset.id;
                    if (confirm(`Are you sure you want to delete milk record ${recordId}?`)) {
                        const row = this.closest('tr');
                        row.remove();
                        showNotification('Milk production record deleted successfully!');
                    }
                });
                
                closeModal('milkModal');
            }
        });
        
        document.getElementById('update-milk-btn').addEventListener('click', function() {
            if (validateMilkForm(true)) {
                showNotification('Milk production record updated successfully!');
                closeModal('milkModal');
            } else {
                showNotification('Please fix the errors in the form.');
            }
        });
        
        document.getElementById('delete-milk-btn').addEventListener('click', function() {
            if (confirm('Are you sure you want to delete this milk production record?')) {
                showNotification('Milk production record deleted successfully!');
                closeModal('milkModal');
            }
        });
        
        // Search functionality
        document.getElementById('search-cattle-btn').addEventListener('click', function() {
            const searchTerm = document.getElementById('cattle-search').value.toLowerCase();
            const rows = document.querySelectorAll('#cattle-table tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
            
            if (searchTerm === '') {
                rows.forEach(row => {
                    row.style.display = '';
                });
            }
        });
        
        // Notification function
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Initial page setup
        document.addEventListener('DOMContentLoaded', function() {
            showNotification('Data loaded successfully!');
        });
    </script>
</body>
</html>